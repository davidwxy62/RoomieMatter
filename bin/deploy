#!/bin/bash
# Stop on errors
set -Eeuo pipefail
# Sanity check command line options
usage() {
    echo "Usage: $0 [--flask]"
}
if [ $# -gt 1 ]; then
    echo "Error: too many arguments"
    usage
    exit 1
fi


for arg in "$@"; do
    case $arg in
        --react)
            npx webpack
            echo "React app built"
            ;;
        *)
            echo "Error: invalid argument"
            usage
            ;;
    esac
done

pkill -f gunicorn
gunicorn -b localhost:8000 -w 2 -D roomieMatter:app
echo "Flask server started"
